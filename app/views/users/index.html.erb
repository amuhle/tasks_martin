<%- model_class = User -%>

<% content_for :links do %>
  <b class="brand" >Users</b>
  <ul class="nav">
    <li><a href="<%= system_tasks_users_path%>">System Tasks</a></li>
  </ul>
<% end %>

<table class="table table table-hover">
  <thead>
    <tr>
      <th>Image</th>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:email) %></th>
      <th><%= model_class.human_attribute_name(:phone) %></th>
      <th><%= model_class.human_attribute_name(:role) %></th>
      <th><%= model_class.human_attribute_name(:status) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td>
          <%= image_tag user.photo.url(:small) %>
        </td>
        <td><%= user.id %></td>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.phone %></td>
        <td><%= user.role %></td>
        <td><%= user.status %></td>
        <td><%=l user.created_at %></td>
        <td>
          <%= link_to 'Show', user_path(user), :class => 'btn btn-small' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      user_path(user),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'delete_user btn btn-small btn-danger' %>

          <%= link_to 'Show Tasks', user_tasks_path(user), :class => 'btn btn-small show_tasks'%>
          <%= link_to 'New Task', new_user_task_path(user), :class => 'btn btn-small new_task' %>
          <%=
          if current_user and current_user.id.equal?(user.id)
                link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_user_registration_path, :class => 'btn btn-small btn-info'
              end
          %>
        </td>
        <input type="hidden" value="<%= user.id %>" class="user_id" />
      </tr>
    <% end %>
  </tbody>
</table>

<%#= link_to t('.new', :default => t("helpers.links.new")),
            new_user_path,
            :class => 'btn btn-primary' %>
